<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Rysk Intressesf√§r - Strukturkarta</title>
  <style>
    /* GRUNDL√ÑGGANDE STIL */
    body { font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; background-color: #f8f9fa; margin: 0; padding: 20px; color: #333; }
    h1 { text-align: center; color: #2c3e50; margin-bottom: 30px; font-size: 24px; }
    
    /* TR√ÑD-STRUKTUR (CSS-MAGI F√ñR LINJERNA) */
    .tree { --line-color: #ccc; --line-width: 2px; margin-left: 20px; }
    .node { position: relative; padding-left: 20px; margin: 10px 0; }
    
    /* Lodr√§ta linjer */
    .node::before { content: ''; position: absolute; top: 0; bottom: 0; left: 0; border-left: var(--line-width) solid var(--line-color); }
    .node:last-child::before { height: 18px; /* Slutar linjen vid sista barnet */ }
    
    /* V√•gr√§ta linjer */
    .content::before { content: ''; position: absolute; top: 18px; left: 0; width: 20px; border-top: var(--line-width) solid var(--line-color); }

    /* INNEH√ÖLLSKORT */
    .content { display: inline-block; background: #fff; border: 1px solid #ddd; padding: 8px 15px; border-radius: 6px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); transition: all 0.2s; position: relative; }
    .content:hover { box-shadow: 0 4px 8px rgba(0,0,0,0.15); transform: translateY(-1px); border-color: #bbb; }
    
    /* Text och L√§nkar */
    .title { font-weight: 600; font-size: 15px; cursor: pointer; display: flex; align-items: center; gap: 8px; }
    .info { display: block; font-size: 13px; color: #666; margin-top: 4px; max-width: 600px; line-height: 1.4; }
    a { color: #0066cc; text-decoration: none; margin-left: 5px; font-size: 12px; font-weight: bold; }
    a:hover { text-decoration: underline; }

    /* EXPANDERBARA BARN */
    .children { margin-left: 30px; display: block; /* Standard: √ñppen */ }
    .children.hidden { display: none; }
    
    /* PLUSS/MINUS IKONER */
    .toggle-btn { width: 16px; height: 16px; border-radius: 50%; background: #eee; border: 1px solid #ccc; display: inline-flex; align-items: center; justify-content: center; font-size: 12px; margin-right: 5px; color: #555; }
    .node.leaf .toggle-btn { visibility: hidden; } /* D√∂lj om inga barn finns */

    /* F√ÑRGKODNING AV GRENAR */
    .root > .content { background: #2c3e50; color: #fff; font-size: 18px; padding: 12px 20px; }
    .root > .content .info { color: #ddd; }
    
    /* SPECIFIKA STILAR F√ñR CASE-ANALYS */
    .highlight-box { border-left: 4px solid #e74c3c; background: #fff5f5; }
    .foi-row { font-family: monospace; font-size: 12px; background: #f4f4f4; border:none; padding: 4px 10px; margin: 2px 0; display:flex; justify-content: space-between; width: 100%; min-width: 400px; }
    
    /* S√ñK-F√ÑLT */
    #search-container { position: sticky; top: 0; background: #f8f9fa; padding: 10px 0; z-index: 100; border-bottom: 1px solid #ddd; margin-bottom: 20px; display: flex; gap: 10px; align-items: center;}
    input { padding: 8px 12px; border: 1px solid #ccc; border-radius: 4px; flex: 1; max-width: 400px; }
    button { padding: 8px 15px; background: #2c3e50; color: white; border: none; border-radius: 4px; cursor: pointer; }
    button:hover { background: #34495e; }

  </style>
</head>
<body>

<div id="search-container">
  <strong>Filter:</strong> 
  <input type="text" id="searchInput" placeholder="S√∂k i tr√§det (t.ex. 'S√∂dert√∂rn', 'V√§ster√•s', 'FOI')..." onkeyup="filterTree()">
  <button onclick="expandAll()">F√§ll ut allt</button>
  <button onclick="collapseAll()">F√§ll ihop allt</button>
</div>

<div id="tree-root" class="tree"></div>

<script>
// --- DATAN (JSON) ---
// H√§r ligger all information. JSON √§r strikt, s√• texten kan inte klumpa ihop sig.
const data = {
  title: "Ryskt Fastighets√§gande & Org. Brottslighet",
  info: "Karta √∂ver kopplingar, domar och risker i Norden.",
  isRoot: true,
  children: [
    // GREN 1: FASTIGHETER
    {
      title: "1. Fastigheter & Mark (Norden)",
      children: [
        {
          title: "Sverige",
          children: [
            { title: "FOI Kartl√§ggning", info: "Ryska ekonomiska intressen kartlagda.", link: "https://www.foi.se/rapportsammanfattning?reportNo=FOI-R--5377--SE" },
            { title: "S√§po & Omfattning", info: "157 ryska medborgare / 247 fastigheter identifierade.", link: "https://www.svd.se/a/9zqnX9/sapo-vill-kunna-stoppa-fientliga-fastighetskop" },
            { title: "CASE: Musk√∂ (Marinbas)", info: "Stanislav Aleshchenko √§ger sj√∂tomt n√§ra skyddsobjekt.", link: "https://www.expressen.se/nyheter/sverige/ryska-miljonarens-jattehus-vid-hemlig-svensk-militarbas/" },
            { title: "CASE: Sk√§rg√•rdstomter", info: "Ryskt n√§tverk k√∂per tomter i Sthlm sk√§rg√•rd.", link: "https://www.aftonbladet.se/nyheter/a/qPEzvw/ryskt-natverk-koper-tomter-i-stockholms-skargard" },
            { title: "CASE: Vidja / Rymdanl√§ggning", info: "Penningtv√§ttsuppl√§gg kopplat till fastighet vid Swedish Space Corp.", link: "https://www.di.se/nyheter/penningtvattare-kopte-hus-vid-svensk-rymdanlaggning/" },
            { title: "CASE: Ryska Kyrkan V√§ster√•s", info: "Strategisk placering n√§ra flygplats. Hot om tv√•ngs√∂vertagande.", link: "https://www.aftonbladet.se/nyheter/a/9358Vp/ryska-kyrkan-i-vasteras-kommunen-forsoker-tvangsoverta-lokalerna" }
          ]
        },
        {
          title: "Finland",
          children: [
            { title: "CASE: Airiston Helmi", info: "Stor razzia 2018, domar mot Pavel Melnikov 2025.", link: "https://yle.fi/a/7-10073103" },
            { title: "Lagstiftning", info: "Krav p√• tillst√•nd f√∂r k√∂pare utanf√∂r EU/EES." },
            { title: "Beslag", info: "Frysning av ryska statliga tillg√•ngar (Naftogaz-m√•let)." }
          ]
        },
        {
          title: "Norge",
          children: [
            { title: "CASE: 'Russerhytter'", info: "Stugor n√§ra Bardufoss flygbas.", link: "https://www.forsvaretsforum.no/bardufoss-bardufoss-flystasjon-russland/politikerkone-har-overtatt-russerhytte-i-bardufoss/372880" },
            { title: "Lagstiftning", info: "Planerar f√∂rhandsgodk√§nnande vid fastighetsk√∂p." }
          ]
        }
      ]
    },
    // GREN 2: BROTTSLIGHET (H√§r ligger din djupanalys)
    {
      title: "2. Org. Brottslighet & Domar",
      children: [
        {
          title: "Sverige: Byggsektorn & Penningtv√§tt",
          children: [
            { title: "EBM Tillslag (Sep 2024)", info: "Grov n√§ringspenningtv√§tt, halv miljard kronor.", link: "https://www.ekobrottsmyndigheten.se/naringspenningtvatt-for-nara-en-halv-miljard-kronor-atta-personer-greps-vid-stort-tillslag/" },
            {
              title: "DJPUPANALYS: S√∂dert√∂rns tingsr√§tt (B 16726-24)",
              highlight: true,
              children: [
                {
                  title: "√ñvergripande h√§ndelsef√∂rlopp",
                  children: [
                    { title: "Systematik", info: "L√•ngvarig struktur verksam sedan minst 2021." },
                    { title: "Akt√∂rer", info: "Ryssland, Belarus, Ukraina, Baltikum." },
                    { title: "Rubricering", info: "Grovt brott p.g.a. professionellt genomf√∂rande." }
                  ]
                },
                {
                  title: "Hur har man agerat?",
                  children: [
                    { title: "Fasadbolag", info: "Bolag som instrument, fiktiv/manipulerad bokf√∂ring. Syfte: D√∂lja ursprung & skapa legitimitet." },
                    { title: "Industriell skala", info: "30‚Äì36 transaktioner per huvudman. Spritt √∂ver tid f√∂r att undvika 'flaggor' hos banker." },
                    { title: "Rollf√∂rdelning", info: "Tydlig hierarki: Huvudm√§n -> Operativa -> M√•lvakter." }
                  ]
                },
                {
                  title: "Koppling till Ryska intressen",
                  children: [
                    { title: "Viktor Soloviev", info: "Rysk medborgare i central k√§rnfunktion." },
                    { title: "Spr√•klig milj√∂", info: "Sluten milj√∂, tolkbehov. Tyder p√• externt n√§tverk, ej lokalt." },
                    { title: "Sanktioner & Kapitalflykt", info: "M√∂jligg√∂r kapitalr√∂relser inom EU. Minskar effekt av sanktioner. Sverige attraktivt pga stabilt system." }
                  ]
                },
                {
                  title: "Hybridhot-indikatorer",
                  children: [
                    { title: "Uth√•llighet", info: "Verksamhet √∂ver flera √•r kr√§ver disciplin och resurser." },
                    { title: "Geografi", info: "Kluster i Bandhagen, V√•rby, Farsta (logistiska baser)." },
                    { title: "Centralstyrning", info: "√Öklagare kr√§ver h√•rda restriktioner (bevisf√∂rst√∂relse/samordning)." }
                  ]
                },
                {
                  title: "Slutsats",
                  info: "Internationell finansiell infrastruktur som objektivt gynnar ryska statliga intressen. Gr√§nsland mellan organiserad brottslighet och ekonomisk hybridkrigf√∂ring."
                }
              ]
            }
          ]
        },
        {
          title: "Internationellt",
          children: [
            { title: "Europol SOCTA 2025", info: "Varning f√∂r ryska n√§tverks sabotage och p√•verkan.", link: "https://www.europol.europa.eu/cms/sites/default/files/documents/EU-SOCTA-2025.pdf" },
            { title: "Spanien", info: "Operation Troika & Oligarch (Maffiam√•l)." },
            { title: "USA", info: "OFAC-sanktioner mot 'Thieves-in-law'." }
          ]
        }
      ]
    },
    // GREN 3: KYRKAN
    {
      title: "3. Moskvapatriarkatet",
      children: [
        { title: "Helige Sergij (Sthlm)", info: "Etablerad 1990-tal. Utpekad av S√§po som plattform f√∂r inh√§mtning." },
        { title: "Koppling: Rosatom", info: "Uppgifter om att Rosatom finansierade kyrkbygget i V√§ster√•s." },
        { title: "N√§rliggande bolag", children: [
            { title: "NC Nordic Control AB", info: "Bokf√∂ringsbrott (2021). Finns p√• FOI-listan." },
            { title: "InstrumentElectronics AB", info: "Kopplat till GRU-misstankar i media." }
        ]}
      ]
    },
    // GREN 4: FOI LISTAN
    {
      title: "4. FOI-registret (Urval & Hela listan)",
      children: [
        {
            title: "Byggverksamhet (SNI F)",
            children: [
                { title: "STRABAG-koncernen", info: "Oleg Deripaska (Sanktionerad). Flera bolag: STRABAG AB, NIMAB, Z√ºblin." },
                { title: "VR ENTREPRENAD AB", info: "Victor Kersikov." },
                { title: "NPN Bygg Sthlm AB", info: "Elena Kopteva." },
                { title: "KV GROUP AB", info: "Georgijs Kascejevs." },
                { title: "Se fullst√§ndig lista i s√∂kfiltret..." }
            ]
        },
        {
            title: "Tillverkning & Industri (SNI C/M)",
            children: [
                { title: "Kubikenborg Aluminium AB", info: "En+/Sual (Deripaska/Vekselberg)." },
                { title: "Sulzer Pumps Sweden AB", info: "Viktor Vekselberg (Renova)." },
                { title: "Eskaro Ukraine AB", info: "Igor Chumakov." }
            ]
        },
        {
            title: "Handel & IT (SNI G/J)",
            children: [
                { title: "Nordic Water Holding AB", info: "Viktor Vekselberg." },
                { title: "InstrumentElectronics i Stockholm", info: "Vladimir Kulemekov." },
                { title: "Reksoft AB", info: "Alexander Egorov." }
            ]
        },
        {
            title: "Finans & Fastighet (SNI K/L)",
            children: [
                { title: "4finance AB", info: "Vera Boiko." },
                { title: "Fastighetsf√∂rvaltning i V√§rmland AB", info: "Rais Gayfullin." },
                { title: "RISE Capital AB", info: "Igor Snegurov." }
            ]
        }
      ]
    }
  ]
};

// --- LOGIK F√ñR ATT RITA TR√ÑDET ---

const container = document.getElementById('tree-root');

function createNodeElement(nodeData) {
  const nodeDiv = document.createElement('div');
  nodeDiv.className = 'node';
  if(!nodeData.children || nodeData.children.length === 0) nodeDiv.classList.add('leaf');
  if(nodeData.isRoot) nodeDiv.classList.add('root');

  // Skapa inneh√•llskortet
  const contentDiv = document.createElement('div');
  contentDiv.className = 'content';
  if(nodeData.highlight) contentDiv.classList.add('highlight-box');

  // Titel-rad med toggle-knapp
  const titleDiv = document.createElement('div');
  titleDiv.className = 'title';
  
  // L√§gg till +/- knapp om barn finns
  if (nodeData.children && nodeData.children.length > 0) {
    const toggleBtn = document.createElement('span');
    toggleBtn.className = 'toggle-btn';
    toggleBtn.innerText = '-'; // Startar utf√§lld
    titleDiv.appendChild(toggleBtn);
    
    // Klick-event f√∂r att √∂ppna/st√§nga
    titleDiv.onclick = function(e) {
        if(e.target.tagName === 'A') return; // Klicka inte om det √§r en l√§nk
        const childrenContainer = nodeDiv.querySelector('.children');
        if(childrenContainer) {
            const isHidden = childrenContainer.classList.toggle('hidden');
            toggleBtn.innerText = isHidden ? '+' : '-';
        }
    };
  }

  // Text
  const textSpan = document.createElement('span');
  textSpan.innerText = nodeData.title;
  titleDiv.appendChild(textSpan);

  // L√§nk
  if (nodeData.link) {
    const linkTag = document.createElement('a');
    linkTag.href = nodeData.link;
    linkTag.target = "_blank";
    linkTag.innerText = "üîó L√§nk";
    titleDiv.appendChild(linkTag);
  }

  contentDiv.appendChild(titleDiv);

  // Info-text under titel
  if (nodeData.info) {
    const infoDiv = document.createElement('span');
    infoDiv.className = 'info';
    infoDiv.innerText = nodeData.info;
    contentDiv.appendChild(infoDiv);
  }

  nodeDiv.appendChild(contentDiv);

  // Skapa barn-container
  if (nodeData.children && nodeData.children.length > 0) {
    const childrenDiv = document.createElement('div');
    childrenDiv.className = 'children';
    
    nodeData.children.forEach(child => {
        childrenDiv.appendChild(createNodeElement(child));
    });
    
    nodeDiv.appendChild(childrenDiv);
  }

  return nodeDiv;
}

// Initiera
container.appendChild(createNodeElement(data));

// --- FUNKTIONER ---

function expandAll() {
    document.querySelectorAll('.children').forEach(el => {
        el.classList.remove('hidden');
    });
    document.querySelectorAll('.toggle-btn').forEach(btn => btn.innerText = '-');
}

function collapseAll() {
    document.querySelectorAll('.children').forEach(el => {
        el.classList.add('hidden');
    });
    document.querySelectorAll('.toggle-btn').forEach(btn => btn.innerText = '+');
    // Beh√•ll roten √∂ppen
    const rootChildren = document.querySelector('.root > .children');
    if(rootChildren) {
        rootChildren.classList.remove('hidden');
        const rootBtn = document.querySelector('.root .toggle-btn');
        if(rootBtn) rootBtn.innerText = '-';
    }
}

// Enkel s√∂kfunktion
function filterTree() {
    const term = document.getElementById('searchInput').value.toLowerCase();
    const contents = document.querySelectorAll('.content');
    
    if (term === "") {
        // √Öterst√§ll
        contents.forEach(c => {
            c.style.display = "";
            c.parentElement.style.display = "";
        });
        return;
    }

    contents.forEach(c => {
        const text = c.innerText.toLowerCase();
        const node = c.parentElement;
        
        if (text.includes(term)) {
            node.style.display = "";
            c.style.backgroundColor = "#fff3cd"; // Markera tr√§ff
            // Visa alla f√∂r√§ldrar
            let parent = node.parentElement;
            while(parent && parent.classList.contains('children')) {
                parent.classList.remove('hidden');
                parent.style.display = "";
                parent.parentElement.style.display = "";
                // Uppdatera knapp
                const btn = parent.parentElement.querySelector('.toggle-btn');
                if(btn) btn.innerText = '-';
                parent = parent.parentElement.parentElement;
            }
        } else {
            node.style.display = "none";
            c.style.backgroundColor = "";
        }
    });
}

</script>
</body>
</html>
